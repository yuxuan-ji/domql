{"version":3,"sources":["webpack://domql/webpack/universalModuleDefinition","webpack://domql/webpack/bootstrap","webpack://domql/./src/domql.js","webpack://domql/./src/domql_parser.js","webpack://domql/./src/domql_tokenizer.js","webpack://domql/./src/index.js"],"names":["Domql","query","_name","compile","_query","tokens","tokenizer","tokenize","ast","parser","parse","_directives","transpiler","transpile","document","querySelector","Token","kind","lexeme","_kind","_lexeme","setupTokenKinds","Kind","VALUE","LPAREN","RPAREN","NUM","EQ","NE","LT","GT","LE","GE","STAR","PCT","COMMA","DOT","SEMI","SQUOTE","DQUOTE","SELECT","FROM","WHERE","ORDER","BY","IN","LIKE","LIMIT","AND","OR","WHITESPACE","keys","Object","i","length","key","AsmDFA","State","FAIL","START","EXCLAMATION","LARGEST_STATE","_acceptingStates","Set","values","_TF_LEN","_TF_STATE_LEN","_transitionFunction","Array","isalpha","c","test","isdigit","isspace","indexOf","registerTransition","oldState","chars","newState","String","fromCharCode","console","log","charCodeAt","state","nextChar","undefined","has","input","result","start","munchedInput","transition","failed","accept","token","SyntaxError","push","dfa","simplifiedMaximalMunch","newTokens","forEach"],"mappings":"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","file":"domql.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"domql\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"domql\"] = factory();\n\telse\n\t\troot[\"domql\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","import * as tokenizer from './domql_tokenizer.js';\r\nimport * as parser from './domql_parser.js';\r\nimport * as transpiler from './domql_parser.js';\r\n\r\nexport default class Domql {\r\n\r\n  constructor(query = null) {\r\n    this._name = 'Domql';\r\n    this.compile(query);\r\n  }\r\n\r\n  get name() {\r\n    return this._name;\r\n  }\r\n\r\n  get query() {\r\n    return this._query;\r\n  }\r\n\r\n  compile(query = null) {\r\n    this._query = query;\r\n    var tokens = tokenizer.tokenize(query);\r\n    var ast = parser.parse(tokens);\r\n    this._directives = transpiler.transpile(ast);\r\n  }\r\n\r\n  execute() {\r\n    return document.querySelector(this._query);\r\n  }\r\n}\r\n","export function parse(tokens) {\r\n  return null;\r\n}\r\n","export class Token {\r\n\r\n  constructor(kind, lexeme) {\r\n    this._kind = kind;\r\n    this._lexeme = lexeme;\r\n  }\r\n\r\n  get kind() {\r\n    return this._kind;\r\n  }\r\n\r\n  get lexeme() {\r\n    return this._lexeme;\r\n  }\r\n\r\n}\r\n\r\nfunction setupTokenKinds() {\r\n  Token.Kind = {\r\n    VALUE: null,\r\n    LPAREN: null,\r\n    RPAREN: null,\r\n    NUM: null,\r\n    EQ: null,\r\n    NE: null,\r\n    LT: null,\r\n    GT: null,\r\n    LE: null,\r\n    GE: null,\r\n    STAR: null,\r\n    PCT: null,\r\n    COMMA: null,\r\n    DOT: null,\r\n    SEMI: null,\r\n    SQUOTE: null,\r\n    DQUOTE: null,\r\n    SELECT: null,\r\n    FROM: null,\r\n    WHERE: null,\r\n    ORDER: null,\r\n    BY: null,\r\n    IN: null,\r\n    LIKE: null,\r\n    LIMIT: null,\r\n    AND: null,\r\n    OR: null,\r\n\r\n    WHITESPACE: null\r\n  };\r\n\r\n  var keys = Object.keys(Token.Kind);\r\n  for (var i = 0; i < keys.length; i++) {\r\n    var key = keys[i];\r\n    Token.Kind[key] = i;\r\n  }\r\n}\r\n\r\nsetupTokenKinds();\r\n\r\nclass AsmDFA {\r\n  constructor() {\r\n    // Setup states\r\n    this.State = Token.Kind;\r\n    var keys = Object.keys(Token.Kind);\r\n    var i = keys.length;\r\n    this.State.FAIL = i++;\r\n    this.State.START = i++;\r\n    this.State.EXCLAMATION = i++;\r\n    this.State.LARGEST_STATE = this.State.EXCLAMATION;\r\n\r\n    // Setup accepting states\r\n    this._acceptingStates = new Set(Object.values(Token.Kind));\r\n\r\n    // Setup transition function\r\n    this._TF_LEN = this.State.LARGEST_STATE + 1;\r\n    this._TF_STATE_LEN = 128;\r\n    this._transitionFunction = new Array(this._TF_LEN);\r\n    for (i = 0; i < this._TF_LEN; i++) {\r\n      this._transitionFunction[i] = {};\r\n    }\r\n\r\n    function isalpha(c) { return /^[a-zA-Z()]$/.test(c); }\r\n    // function isalnum(c) {\r\n    //   var code, i;\r\n    //   code = c.charCodeAt(i);\r\n    //   if (!(code > 47 && code < 58) && // numeric (0-9)\r\n    //       !(code > 64 && code < 91) && // upper alpha (A-Z)\r\n    //       !(code > 96 && code < 123)) { // lower alpha (a-z)\r\n    //     return false;\r\n    //   }\r\n    //   return true;\r\n    // }\r\n    function isdigit(c) {\r\n      if (c >= '0' && c <= '9') return true;\r\n      return false;\r\n    }\r\n    function isspace(c) {return \" \\t\\n\\r\\v\".indexOf(c) !== -1; }\r\n\r\n    this.registerTransition(this.State.START, isalpha, this.State.VALUE);\r\n    this.registerTransition(this.State.VALUE, isalpha, this.State.VALUE);\r\n    this.registerTransition(this.State.START, isdigit, this.State.NUM);\r\n    this.registerTransition(this.State.NUM, isdigit, this.State.NUM);\r\n    this.registerTransition(this.State.START, \"(\", this.State.LPAREN);\r\n    this.registerTransition(this.State.START, \")\", this.State.RPAREN);\r\n    this.registerTransition(this.State.START, \"=\", this.State.EQ);\r\n    this.registerTransition(this.State.START, \"!\", this.State.EXCLAMATION);\r\n    this.registerTransition(this.State.EXCLAMATION, \"=\", this.State.NE);\r\n    this.registerTransition(this.State.START, \"<\", this.State.LT);\r\n    this.registerTransition(this.State.START, \">\", this.State.GT);\r\n    this.registerTransition(this.State.LT, \"=\", this.State.LE);\r\n    this.registerTransition(this.State.GT, \"=\", this.State.GE);\r\n    this.registerTransition(this.State.START, \"*\", this.State.STAR);\r\n    this.registerTransition(this.State.START, \"%\", this.State.PCT);\r\n    this.registerTransition(this.State.START, \",\", this.State.COMMA);\r\n    this.registerTransition(this.State.START, \";\", this.State.SEMI);\r\n    this.registerTransition(this.State.START, isspace, this.State.WHITESPACE);\r\n    this.registerTransition(this.State.WHITESPACE, isspace, this.State.WHITESPACE);\r\n    this.registerTransition(this.State.START, \"'\", this.State.SQUOTE);\r\n    this.registerTransition(this.State.START, '\"', this.State.DQUOTE);\r\n    this.registerTransition(this.State.START, '.', this.State.DOT);\r\n  }\r\n  // Register a transition on all chars in chars or on all chars matching test\r\n  registerTransition(oldState, chars, newState) {\r\n    if (typeof chars === 'function') {\r\n      for (var c = 0; c < this._TF_STATE_LEN; ++c) {\r\n        if (chars(String.fromCharCode(c))) this._transitionFunction[oldState][c] = newState;\r\n        if (this._transitionFunction[0][32] === 26) {\r\n          console.log();\r\n        }\r\n      }\r\n    } else {\r\n      for (var i = 0; i < chars.length; i++) {\r\n        this._transitionFunction[oldState][chars[i].charCodeAt()] = newState;\r\n      }\r\n    }\r\n  }\r\n  // Returns the state corresponding to following a transition\r\n  // from the given starting state on the given character,\r\n  // or a special fail state if the transition does not exist.\r\n  transition(state, nextChar) {\r\n    return this._transitionFunction[state][nextChar.charCodeAt()] === undefined ?\r\n      this.State.FAIL : this._transitionFunction[state][nextChar.charCodeAt()];\r\n  };\r\n\r\n  // Checks whether the state returned by transition\r\n  // corresponds to failure to transition.\r\n  failed(state) { return state === this.State.FAIL; }\r\n\r\n  // Checks whether the state returned by transition\r\n  // is an accepting state.\r\n  accept(state) {\r\n    return this._acceptingStates.has(state);\r\n  }\r\n\r\n  // Returns the starting state of the DFA\r\n  start() { return this.State.START; }\r\n\r\n  // Tokenizes an input string according to the SMM algorithm.\r\n  simplifiedMaximalMunch(input) {\r\n    var result = [];\r\n\r\n    var state = this.start();\r\n    var munchedInput = '';\r\n\r\n    // We can't use a range-based for loop effectively here\r\n    // since the iterator doesn't always increment.\r\n    for (let i = 0; i < input.length;) {\r\n      var c = input[i];\r\n      var oldState = state;\r\n      state = this.transition(state, c);\r\n\r\n      if (!this.failed(state)) {\r\n        munchedInput += c;\r\n        oldState = state;\r\n\r\n        ++i;\r\n      }\r\n\r\n      if (i === input.length || this.failed(state)) {\r\n        if (this.accept(oldState)) {\r\n          var token = new Token(oldState, munchedInput);\r\n\r\n          if (token.kind === Token.Kind.VALUE) {\r\n            if (token.lexeme === \"SELECT\") token = new Token(Token.Kind.SELECT, token.lexeme);\r\n            else if (token.lexeme === \"FROM\") token = new Token(Token.Kind.FROM, token.lexeme);\r\n            else if (token.lexeme === \"WHERE\") token = new Token(Token.Kind.WHERE, token.lexeme);\r\n            else if (token.lexeme === \"ORDER\") token = new Token(Token.Kind.ORDER, token.lexeme);\r\n            else if (token.lexeme === \"BY\") token = new Token(Token.Kind.BY, token.lexeme);\r\n            else if (token.lexeme === \"LIMIT\") token = new Token(Token.Kind.LIMIT, token.lexeme);\r\n            else if (token.lexeme === \"AND\") token = new Token(Token.Kind.AND, token.lexeme);\r\n            else if (token.lexeme === \"OR\") token = new Token(Token.Kind.OR, token.lexeme);\r\n            else if (token.lexeme === \"LIKE\") token = new Token(Token.Kind.LIKE, token.lexeme);\r\n            else if (token.lexeme === \"IN\") token = new Token(Token.Kind.IN, token.lexeme);\r\n\r\n          } else if (token.kind === Token.Kind.SQUOTE || token.kind === Token.Kind.DQUOTE) {\r\n            while (i < input.length) {\r\n              c = input[i];\r\n              munchedInput += c;\r\n              ++i;\r\n              if (c === token.lexeme) break;\r\n            }\r\n            if (munchedInput[munchedInput.length - 1] !== token.lexeme) {\r\n              throw new SyntaxError(\"Scanning failure: Simplified maximal munch failed on input: \" + munchedInput);\r\n            }\r\n            token = new Token(Token.Kind.VALUE, munchedInput);\r\n          }\r\n\r\n          result.push(token);\r\n\r\n          munchedInput = \"\";\r\n          state = this.start();\r\n        } else {\r\n          if (this.failed(state)) {\r\n            munchedInput += c;\r\n          }\r\n          throw new SyntaxError(\"Scanning failure: Simplified maximal munch failed on input: \" + munchedInput);\r\n        }\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n}\r\n\r\nexport function tokenize(query = null) {\r\n  if (query === null || query === undefined) return null;\r\n  var dfa = new AsmDFA();\r\n\r\n  var tokens = dfa.simplifiedMaximalMunch(query);\r\n\r\n  // We need to:\r\n  // * Remove WHITESPACE tokens entirely.\r\n\r\n  var newTokens = [];\r\n\r\n  tokens.forEach(function (token) {\r\n    if (token.kind !== Token.Kind.WHITESPACE) {\r\n      newTokens.push(token);\r\n    }\r\n  });\r\n\r\n  return newTokens;\r\n}\r\n","import Domql from './domql.js';\nexport { Domql };\n"],"sourceRoot":""}