!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("domql",[],r):"object"==typeof exports?exports.domql=r():t.domql=r()}("undefined"!=typeof self?self:this,function(){return function(t){var r={};function e(n){if(r[n])return r[n].exports;var u=r[n]={i:n,l:!1,exports:{}};return t[n].call(u.exports,u,u.exports,e),u.l=!0,u.exports}return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var u in t)e.d(n,u,function(r){return t[r]}.bind(null,u));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="",e(e.s=0)}([function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Domql=void 0;var n=e(1),u=e(3),o=function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,e):{};n.get||n.set?Object.defineProperty(r,e,n):r[e]=t[e]}return r.default=t,r}(e(4));function i(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=function(){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this._name="Domql",this.compile(r)}var r,e,a;return r=t,(e=[{key:"compile",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this._query=t,t){var r=(0,n.parse)(t);this._directives=(0,u.transpile)(r)}}},{key:"execute",value:function(){return o.execute(this._directives)}},{key:"name",get:function(){return this._name}},{key:"query",get:function(){return this._query}}])&&i(r.prototype,e),a&&i(r,a),t}();r.Domql=a},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parse=function(t){return(0,n.parse)(t)};var n=e(2)},function(t,r,e){"use strict";function n(t,r,e,u){this.message=t,this.expected=r,this.found=e,this.location=u,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,n)}function u(t,r){r=void 0!==r?r:{};var e,u={},o={start:Me},i=Me,a="!",c="=",f=">=",l=">",s="<=",p="<>",v="<",h="!=",d='"',b="'",y="`",g="*",A="\\'",m='\\"',C="\\\\",x="\\/",w="\\b",O="\\f",E="\\n",_="\\r",S="\\t",L="\\u",R=".",j="null",F="true",T="false",D="select",N="from",I="where",M="group",P="by",q="order",k="limit",U="asc",z="desc",Z="in",K="is",X="like",B="exists",G="not",H="and",W="or",Y=",",J="(",Q=")",V=/^[^"]/,$=/^[^']/,tt=/^[^`]/,rt=/^[A-Za-z_]/,et=/^[A-Za-z0-9_]/,nt=/^[A-Za-z0-9_:]/,ut=/^[^'\\\0-\x1F\x7F]/,ot=/^[0-9]/,it=/^[0-9a-fA-F]/,at=/^[eE]/,ct=/^[+\-]/,ft=/^[ \t\n\r]/,lt=Se("!",!1),st=Se("=",!1),pt=Se(">=",!1),vt=Se(">",!1),ht=Se("<=",!1),dt=Se("<>",!1),bt=Se("<",!1),yt=Se("!=",!1),gt=Se('"',!1),At=Le(['"'],!0,!1),mt=Se("'",!1),Ct=Le(["'"],!0,!1),xt=Se("`",!1),wt=Le(["`"],!0,!1),Ot=Le([["A","Z"],["a","z"],"_"],!1,!1),Et=Le([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),_t=Le([["A","Z"],["a","z"],["0","9"],"_",":"],!1,!1),St=Le(["'","\\",["\0",""],""],!0,!1),Lt=Se("\\'",!1),Rt=Se('\\"',!1),jt=Se("\\\\",!1),Ft=Se("\\/",!1),Tt=Se("\\b",!1),Dt=Se("\\f",!1),Nt=Se("\\n",!1),It=Se("\\r",!1),Mt=Se("\\t",!1),Pt=Se("\\u",!1),qt=Se(".",!1),kt=Le([["0","9"]],!1,!1),Ut=Le([["0","9"],["a","f"],["A","F"]],!1,!1),zt=Le(["e","E"],!1,!1),Zt=Le(["+","-"],!1,!1),Kt=Se("NULL",!0),Xt=Se("TRUE",!0),Bt=Se("FALSE",!0),Gt=Se("SELECT",!0),Ht=Se("FROM",!0),Wt=Se("WHERE",!0),Yt=Se("GROUP",!0),Jt=Se("BY",!0),Qt=Se("ORDER",!0),Vt=Se("LIMIT",!0),$t=Se("ASC",!0),tr=Se("DESC",!0),rr=Se("IN",!0),er=Se("IS",!0),nr=Se("LIKE",!0),ur=Se("EXISTS",!0),or=Se("NOT",!0),ir=Se("AND",!0),ar=Se("OR",!0),cr=Se(",",!1),fr=Se("*",!1),lr=Se("(",!1),sr=Se(")",!1),pr=Le([" ","\t","\n","\r"],!1,!1),vr=function(t,r,e,n,u,o){return{type:"select",columns:t,from:r,where:e,groupby:n,orderby:u,limit:o}},hr=function(){return"*"},dr=function(t,r){return Fn(t,r)},br=function(t){return t},yr=function(t){return t},gr=function(t,r){return r.unshift(t),r},Ar=function(t){return t},mr=function(t,r){var e={type:"table_ref",table:t};return null!==r&&(e.table=r[3]),e},Cr=function(t){return t},xr=function(t,r){var e=t;return e.order="ASC","DESC"===r&&(e.order="DESC"),e},wr=function(t){return t},Or=function(t,r){var e={type:"expr_list"};return e.value=Fn(t,r),e},Er=function(t,r){return Tn(t,r)},_r=function(t){return Rn("NOT",t)},Sr=function(t,r){return null===r?t:"arithmetic"===r.type?Tn(t,r.tail):jn(r.op,t,r.right)},Lr=function(t,r){return r.parentheses=!0,Rn(t,r)},Rr=function(t){return t[0]+" "+t[2]},jr=function(t){return{type:"arithmetic",tail:t}},Fr=function(t){return{op:"IS",right:t}},Tr=function(t){return{op:"IS NOT",right:t}},Dr=function(t,r){return{op:t,right:r}},Nr=function(t,r){return{op:t,right:r}},Ir=function(t,r){return Tn(t,r)},Mr=function(t){return t.parentheses=!0,t},Pr=function(t){return t.parentheses=!0,t},qr=function(t,r){return{type:"column_ref",table:t,column:r}},kr=function(t){return{type:"column_ref",column:t}},Ur=function(t){return!0===Ln[t.toUpperCase()]},zr=function(t){return t},Zr=function(t){return t.join("")},Kr=function(t){return t},Xr=function(t,r){return t+r.join("")},Br=function(){return{type:"null",value:null}},Gr=function(){return{type:"bool",value:!0}},Hr=function(){return{type:"bool",value:!1}},Wr=function(t){return{type:"string",value:t[1].join("")}},Yr=function(){return"'"},Jr=function(){return'"'},Qr=function(){return"\\"},Vr=function(){return"/"},$r=function(){return"\b"},te=function(){return"\f"},re=function(){return"\n"},ee=function(){return"\r"},ne=function(){return"\t"},ue=function(t,r,e,n){return String.fromCharCode(parseInt("0x"+t+r+e+n))},oe=function(t){return{type:"number",value:t}},ie=function(t,r,e){return parseFloat(t+r+e)},ae=function(t,r){return parseFloat(t+r)},ce=function(t,r){return parseFloat(t+r)},fe=function(t){return parseFloat(t)},le=function(t){return"."+t},se=function(t,r){return t+r},pe=function(t){return t.join("")},ve=function(t,r){return t+(null!==r?r:"")},he=function(){return"ASC"},de=function(){return"DESC"},be=function(){return"IN"},ye=function(){return"IS"},ge=function(){return"LIKE"},Ae=function(){return"EXISTS"},me=function(){return"NOT"},Ce=function(){return"AND"},xe=function(){return"OR"},we=0,Oe=[{line:1,column:1}],Ee=[],_e=0;if("startRule"in r){if(!(r.startRule in o))throw new Error("Can't start parsing from rule \""+r.startRule+'".');i=o[r.startRule]}function Se(t,r){return{type:"literal",text:t,ignoreCase:r}}function Le(t,r,e){return{type:"class",parts:t,inverted:r,ignoreCase:e}}function Re(r){var e,n=Oe[r];if(n)return n;for(e=r-1;!Oe[e];)e--;for(n={line:(n=Oe[e]).line,column:n.column};e<r;)10===t.charCodeAt(e)?(n.line++,n.column=1):n.column++,e++;return Oe[r]=n,n}var je="string"==typeof r.filename&&r.filename.length>0;function Fe(t,e){var n={};je&&(n.filename=r.filename);var u=Re(t);n.start={offset:t,line:u.line,column:u.column};var o=Re(e);return n.end={offset:e,line:o.line,column:o.column},n}function Te(){Ee.push({pos:we,variants:[]})}function De(t){var r=Ee[Ee.length-1];we<r.pos||(we>r.pos&&(r.pos=we,r.variants=[]),r.variants.push(t))}function Ne(t){var r=Ee.pop(),e=Ee[Ee.length-1],n=r.variants;e.pos===r.pos&&(t&&(n=n.map(function(t){return"not"===t.type?t.expected:{type:"not",expected:t}})),Array.prototype.push.apply(e.variants,n))}function Ie(t,r,e){return new n(n.buildMessage(t,r),t,r,e)}function Me(){return Pe()}function Pe(){var r,e,n,o,i,a,c;return r=we,_n(),function(){var r,e,n,o;r=we,i=Gt,0===_e&&De(i),t.substr(we,6).toLowerCase()===D?(e=t.substr(we,6),we+=6):e=u;var i;e!==u?(n=we,Te(),o=rn(),Ne(!0),o===u?n=void 0:(we=n,n=u),n!==u?r=e=[e,n]:(we=r,r=u)):(we=r,r=u);return r}()!==u?(_n(),(e=function(){var r,e,n,o,i,a,c,f;r=we,e=we,(n=function(){var r,e;return e=fr,0===_e&&De(e),42===t.charCodeAt(we)?(r=g,we++):r=u,r}())!==u?(o=we,Te(),i=rn(),Ne(!0),i===u?o=void 0:(we=o,o=u),o!==u?e=n=[n,o]:(we=e,e=u)):(we=e,e=u);e!==u&&(r,e=hr());if((r=e)===u)if(r=we,(e=qe())!==u){for(n=[],o=we,i=_n(),(a=wn())!==u?(c=_n(),(f=qe())!==u?o=i=[i,a,c,f]:(we=o,o=u)):(we=o,o=u);o!==u;)n.push(o),o=we,i=_n(),(a=wn())!==u?(c=_n(),(f=qe())!==u?o=i=[i,a,c,f]:(we=o,o=u)):(we=o,o=u);r,r=dr(e,n)}else we=r,r=u;return r}())!==u?(_n(),(n=function(){var r,e;r=we,function(){var r,e,n,o,i;return r=we,i=Ht,0===_e&&De(i),t.substr(we,4).toLowerCase()===N?(e=t.substr(we,4),we+=4):e=u,e!==u?(n=we,Te(),o=rn(),Ne(!0),o===u?n=void 0:(we=n,n=u),n!==u?r=e=[e,n]:(we=r,r=u)):(we=r,r=u),r}()!==u?(_n(),(e=function(){var t,r,e,n;if(t=we,(r=Ue())!==u){for(e=[],n=ke();n!==u;)e.push(n),n=ke();t,t=gr(r,e)}else we=t,t=u;return t}())!==u?(r,r=yr(e)):(we=r,r=u)):(we=r,r=u);return r}())===u&&(n=null),_n(),(o=function(){var r,e;r=we,function(){var r,e,n,o,i;return r=we,i=Wt,0===_e&&De(i),t.substr(we,5).toLowerCase()===I?(e=t.substr(we,5),we+=5):e=u,e!==u?(n=we,Te(),o=rn(),Ne(!0),o===u?n=void 0:(we=n,n=u),n!==u?r=e=[e,n]:(we=r,r=u)):(we=r,r=u),r}()!==u?(_n(),(e=Ke())!==u?(r,r=Cr(e)):(we=r,r=u)):(we=r,r=u);return r}())===u&&(o=null),_n(),(i=function(){var r,e;r=we,function(){var r,e,n,o,i;return r=we,i=Yt,0===_e&&De(i),t.substr(we,5).toLowerCase()===M?(e=t.substr(we,5),we+=5):e=u,e!==u?(n=we,Te(),o=rn(),Ne(!0),o===u?n=void 0:(we=n,n=u),n!==u?r=e=[e,n]:(we=r,r=u)):(we=r,r=u),r}()!==u?(_n(),hn()!==u?(_n(),(e=function(){var t,r,e,n,o,i,a,c;if(t=we,(r=Qe())!==u){for(e=[],n=we,o=_n(),(i=wn())!==u?(a=_n(),(c=Qe())!==u?n=o=[o,i,a,c]:(we=n,n=u)):(we=n,n=u);n!==u;)e.push(n),n=we,o=_n(),(i=wn())!==u?(a=_n(),(c=Qe())!==u?n=o=[o,i,a,c]:(we=n,n=u)):(we=n,n=u);t,t=dr(r,e)}else we=t,t=u;return t}())!==u?(r,r=yr(e)):(we=r,r=u)):(we=r,r=u)):(we=r,r=u);return r}())===u&&(i=null),_n(),(a=function(){var r,e;r=we,function(){var r,e,n,o,i;return r=we,i=Qt,0===_e&&De(i),t.substr(we,5).toLowerCase()===q?(e=t.substr(we,5),we+=5):e=u,e!==u?(n=we,Te(),o=rn(),Ne(!0),o===u?n=void 0:(we=n,n=u),n!==u?r=e=[e,n]:(we=r,r=u)):(we=r,r=u),r}()!==u?(_n(),hn()!==u?(_n(),(e=function(){var t,r,e,n,o,i,a,c;if(t=we,(r=ze())!==u){for(e=[],n=we,o=_n(),(i=wn())!==u?(a=_n(),(c=ze())!==u?n=o=[o,i,a,c]:(we=n,n=u)):(we=n,n=u);n!==u;)e.push(n),n=we,o=_n(),(i=wn())!==u?(a=_n(),(c=ze())!==u?n=o=[o,i,a,c]:(we=n,n=u)):(we=n,n=u);t,t=dr(r,e)}else we=t,t=u;return t}())!==u?(r,r=yr(e)):(we=r,r=u)):(we=r,r=u)):(we=r,r=u);return r}())===u&&(a=null),_n(),(c=function(){var r,e;r=we,function(){var r,e,n,o,i;return r=we,i=Vt,0===_e&&De(i),t.substr(we,5).toLowerCase()===k?(e=t.substr(we,5),we+=5):e=u,e!==u?(n=we,Te(),o=rn(),Ne(!0),o===u?n=void 0:(we=n,n=u),n!==u?r=e=[e,n]:(we=r,r=u)):(we=r,r=u),r}()!==u?(_n(),(e=an())!==u?(r,r=wr(e)):(we=r,r=u)):(we=r,r=u);return r}())===u&&(c=null),r,r=vr(e,n,o,i,a,c)):(we=r,r=u)):(we=r,r=u),r}function qe(){var t,r;return t=we,(r=Qe())!==u&&(t,r=br(r)),t=r}function ke(){var t,r;return t=we,_n(),wn()!==u?(_n(),(r=Ue())!==u?(t,t=Ar(r)):(we=t,t=u)):(we=t,t=u),t}function Ue(){var t,r,e,n,o,i,a;return t=we,(r=Ve())!==u?(e=we,n=_n(),(o=xn())!==u?(i=_n(),(a=Ve())!==u?e=n=[n,o,i,a]:(we=e,e=u)):(we=e,e=u),e===u&&(e=null),t,t=mr(r,e)):(we=t,t=u),t}function ze(){var r,e,n;return r=we,(e=Qe())!==u?(_n(),(n=function(){var r,e,n,o;r=we,i=tr,0===_e&&De(i),t.substr(we,4).toLowerCase()===z?(e=t.substr(we,4),we+=4):e=u;var i;e!==u?(n=we,Te(),o=rn(),Ne(!0),o===u?n=void 0:(we=n,n=u),n!==u?(r,r=de()):(we=r,r=u)):(we=r,r=u);return r}())===u&&(n=function(){var r,e,n,o;r=we,i=$t,0===_e&&De(i),t.substr(we,3).toLowerCase()===U?(e=t.substr(we,3),we+=3):e=u;var i;e!==u?(n=we,Te(),o=rn(),Ne(!0),o===u?n=void 0:(we=n,n=u),n!==u?(r,r=he()):(we=r,r=u)):(we=r,r=u);return r}()),n===u&&(n=null),r,r=xr(e,n)):(we=r,r=u),r}function Ze(){var t,r,e,n,o,i,a,c;if(t=we,(r=Ke())!==u){for(e=[],n=we,o=_n(),(i=wn())!==u?(a=_n(),(c=Ke())!==u?n=o=[o,i,a,c]:(we=n,n=u)):(we=n,n=u);n!==u;)e.push(n),n=we,o=_n(),(i=wn())!==u?(a=_n(),(c=Ke())!==u?n=o=[o,i,a,c]:(we=n,n=u)):(we=n,n=u);t,t=Or(r,e)}else we=t,t=u;return t}function Ke(){var t,r,e,n,o,i,a,c;if(t=we,(r=Xe())!==u){for(e=[],n=we,o=_n(),(i=Cn())!==u?(a=_n(),(c=Xe())!==u?n=o=[o,i,a,c]:(we=n,n=u)):(we=n,n=u);n!==u;)e.push(n),n=we,o=_n(),(i=Cn())!==u?(a=_n(),(c=Xe())!==u?n=o=[o,i,a,c]:(we=n,n=u)):(we=n,n=u);t,t=Er(r,e)}else we=t,t=u;return t}function Xe(){var t,r,e,n,o,i,a,c;if(t=we,(r=Be())!==u){for(e=[],n=we,o=_n(),(i=mn())!==u?(a=_n(),(c=Be())!==u?n=o=[o,i,a,c]:(we=n,n=u)):(we=n,n=u);n!==u;)e.push(n),n=we,o=_n(),(i=mn())!==u?(a=_n(),(c=Be())!==u?n=o=[o,i,a,c]:(we=n,n=u)):(we=n,n=u);t,t=Er(r,e)}else we=t,t=u;return t}function Be(){var r,e,n,o,i,f=function(t){0===_e&&De(t)};return(r=Ge())===u&&(r=function(){var t,r,e;t=we,(r=function(){var t,r,e,n,o;return t=we,r=we,(e=An())!==u?(n=_n(),(o=gn())!==u?r=e=[e,n,o]:(we=r,r=u)):(we=r,r=u),r!==u&&(t,r=Rr(r)),(t=r)===u&&(t=gn()),t}())!==u?(_n(),On()!==u?(_n(),(e=Pe())!==u?(_n(),En()!==u?(t,t=Lr(r,e)):(we=t,t=u)):(we=t,t=u)):(we=t,t=u)):(we=t,t=u);return t}())===u&&(r=we,(e=An())===u&&(e=we,f(lt),33===t.charCodeAt(we)?(n=a,we++):n=u,n!==u?(o=we,Te(),f(st),61===t.charCodeAt(we)?(i=c,we++):i=u,Ne(!0),i===u?o=void 0:(we=o,o=u),o!==u?e=n=[n,o]:(we=e,e=u)):(we=e,e=u)),e!==u?(n=_n(),(o=Be())!==u?(r,r=_r(o)):(we=r,r=u)):(we=r,r=u)),r}function Ge(){var t,r,e;return t=we,(r=We())!==u?(_n(),(e=function(){var t;(t=function(){var t,r,e,n,o,i,a;if(t=we,r=[],e=we,n=_n(),(o=He())!==u?(i=_n(),(a=We())!==u?e=n=[n,o,i,a]:(we=e,e=u)):(we=e,e=u),e!==u)for(;e!==u;)r.push(e),e=we,n=_n(),(o=He())!==u?(i=_n(),(a=We())!==u?e=n=[n,o,i,a]:(we=e,e=u)):(we=e,e=u);else r=u;return r!==u&&(t,r=jr(r)),t=r}())===u&&(t=function(){var t,r,e;t=we,(r=function(){var t,r,e,n,o;return t=we,r=we,(e=An())!==u?(n=_n(),(o=dn())!==u?r=e=[e,n,o]:(we=r,r=u)):(we=r,r=u),r!==u&&(t,r=Rr(r)),(t=r)===u&&(t=dn()),t}())!==u?(_n(),On()!==u?(_n(),(e=Ze())!==u?(_n(),En()!==u?(t,t=Nr(r,e)):(we=t,t=u)):(we=t,t=u)):(we=t,t=u)):(we=t,t=u);return t}())===u&&(t=function(){var t,r,e,n,o;t=we,(r=bn())!==u?(e=_n(),(n=We())!==u?(t,t=Fr(n)):(we=t,t=u)):(we=t,t=u);t===u&&(t=we,r=we,(e=bn())!==u?(n=_n(),(o=An())!==u?r=e=[e,n,o]:(we=r,r=u)):(we=r,r=u),r!==u?(e=_n(),(n=We())!==u?(t,t=Tr(n)):(we=t,t=u)):(we=t,t=u));return t}())===u&&(t=function(){var t,r,e;t=we,(r=function(){var t,r,e,n,o;return t=we,r=we,(e=An())!==u?(n=_n(),(o=yn())!==u?r=e=[e,n,o]:(we=r,r=u)):(we=r,r=u),r!==u&&(t,r=Rr(r)),(t=r)===u&&(t=yn()),t}())!==u?(_n(),(e=Ge())!==u?(t,t=Dr(r,e)):(we=t,t=u)):(we=t,t=u);return t}());return t}())===u&&(e=null),t,t=Sr(r,e)):(we=t,t=u),t}function He(){var r,e=function(t){0===_e&&De(t)};return e(pt),t.substr(we,2)===f?(r=f,we+=2):r=u,r===u&&(e(vt),62===t.charCodeAt(we)?(r=l,we++):r=u,r===u&&(e(ht),t.substr(we,2)===s?(r=s,we+=2):r=u,r===u&&(e(dt),t.substr(we,2)===p?(r=p,we+=2):r=u,r===u&&(e(bt),60===t.charCodeAt(we)?(r=v,we++):r=u,r===u&&(e(st),61===t.charCodeAt(we)?(r=c,we++):r=u,r===u&&(e(yt),t.substr(we,2)===h?(r=h,we+=2):r=u)))))),r}function We(){var t,r,e,n,o,i;if(t=we,(r=Ye())!==u){for(e=[],n=we,o=_n(),(i=Ye())!==u?n=o=[o,i]:(we=n,n=u);n!==u;)e.push(n),n=we,o=_n(),(i=Ye())!==u?n=o=[o,i]:(we=n,n=u);t,t=Er(r,e)}else we=t,t=u;return t}function Ye(){var t,r,e,n,o,i;if(t=we,(r=Je())!==u){for(e=[],n=we,o=_n(),(i=Je())!==u?n=o=[o,i]:(we=n,n=u);n!==u;)e.push(n),n=we,o=_n(),(i=Je())!==u?n=o=[o,i]:(we=n,n=u);t,t=Ir(r,e)}else we=t,t=u;return t}function Je(){var t,r;return(t=un())===u&&(t=Qe())===u&&(t=we,On()!==u?(_n(),(r=Ke())!==u?(_n(),En()!==u?(t,t=Mr(r)):(we=t,t=u)):(we=t,t=u)):(we=t,t=u),t===u&&(t=we,On()!==u?(_n(),(r=Ze())!==u?(_n(),En()!==u?(t,t=Pr(r)):(we=t,t=u)):(we=t,t=u)):(we=t,t=u))),t}function Qe(){var t,r,e;return t=we,(r=Ve())!==u?(_n(),xn()!==u?(_n(),(e=tn())!==u?(t,t=qr(r,e)):(we=t,t=u)):(we=t,t=u)):(we=t,t=u),t===u&&(t=we,(r=tn())!==u&&(t,r=kr(r)),t=r),t}function Ve(){var t,r;return t=we,(r=function(){var t,r,e,n;if(t=we,(r=rn())!==u){for(e=[],n=en();n!==u;)e.push(n),n=en();t,t=Xr(r,e)}else we=t,t=u;return t}())!==u?(we,(Ur(r)?u:void 0)!==u?(t,t=zr(r)):(we=t,t=u)):(we=t,t=u),t===u&&(t=we,(r=$e())!==u&&(t,r=zr(r)),t=r),t}function $e(){var r;return(r=function(){var r,e,n,o,i=function(t){0===_e&&De(t)};r=we,i(gt),34===t.charCodeAt(we)?(e=d,we++):e=u;if(e!==u){if(n=[],i(At),V.test(t.charAt(we))?(o=t.charAt(we),we++):o=u,o!==u)for(;o!==u;)n.push(o),i(At),V.test(t.charAt(we))?(o=t.charAt(we),we++):o=u;else n=u;n!==u?(i(gt),34===t.charCodeAt(we)?(o=d,we++):o=u,o!==u?(r,r=Zr(n)):(we=r,r=u)):(we=r,r=u)}else we=r,r=u;return r}())===u&&(r=function(){var r,e,n,o,i=function(t){0===_e&&De(t)};r=we,i(mt),39===t.charCodeAt(we)?(e=b,we++):e=u;if(e!==u){if(n=[],i(Ct),$.test(t.charAt(we))?(o=t.charAt(we),we++):o=u,o!==u)for(;o!==u;)n.push(o),i(Ct),$.test(t.charAt(we))?(o=t.charAt(we),we++):o=u;else n=u;n!==u?(i(mt),39===t.charCodeAt(we)?(o=b,we++):o=u,o!==u?(r,r=Zr(n)):(we=r,r=u)):(we=r,r=u)}else we=r,r=u;return r}())===u&&(r=function(){var r,e,n,o,i=function(t){0===_e&&De(t)};r=we,i(xt),96===t.charCodeAt(we)?(e=y,we++):e=u;if(e!==u){if(n=[],i(wt),tt.test(t.charAt(we))?(o=t.charAt(we),we++):o=u,o!==u)for(;o!==u;)n.push(o),i(wt),tt.test(t.charAt(we))?(o=t.charAt(we),we++):o=u;else n=u;n!==u?(i(xt),96===t.charCodeAt(we)?(o=y,we++):o=u,o!==u?(r,r=Zr(n)):(we=r,r=u)):(we=r,r=u)}else we=r,r=u;return r}()),r}function tn(){var t,r;return t=we,(r=function(){var t,r,e,n;if(t=we,(r=rn())!==u){for(e=[],n=nn();n!==u;)e.push(n),n=nn();t,t=Xr(r,e)}else we=t,t=u;return t}())!==u?(we,(Ur(r)?u:void 0)!==u?(t,t=Kr(r)):(we=t,t=u)):(we=t,t=u),t===u&&(t=$e()),t}function rn(){var r,e;return e=Ot,0===_e&&De(e),rt.test(t.charAt(we))?(r=t.charAt(we),we++):r=u,r}function en(){var r,e;return e=Et,0===_e&&De(e),et.test(t.charAt(we))?(r=t.charAt(we),we++):r=u,r}function nn(){var r,e;return e=_t,0===_e&&De(e),nt.test(t.charAt(we))?(r=t.charAt(we),we++):r=u,r}function un(){var r;return(r=function(){var r,e,n,o,i,a=function(t){0===_e&&De(t)};r=we,e=we,a(mt),39===t.charCodeAt(we)?(n=b,we++):n=u;if(n!==u){for(o=[],i=on();i!==u;)o.push(i),i=on();a(mt),39===t.charCodeAt(we)?(i=b,we++):i=u,i!==u?e=n=[n,o,i]:(we=e,e=u)}else we=e,e=u;e!==u&&(r,e=Wr(e));return r=e}())===u&&(r=an())===u&&(r=function(){var r,e;r=we,(e=function(){var r,e,n,o,i;return r=we,i=Xt,0===_e&&De(i),t.substr(we,4).toLowerCase()===F?(e=t.substr(we,4),we+=4):e=u,e!==u?(n=we,Te(),o=rn(),Ne(!0),o===u?n=void 0:(we=n,n=u),n!==u?r=e=[e,n]:(we=r,r=u)):(we=r,r=u),r}())!==u&&(r,e=Gr());(r=e)===u&&(r=we,(e=function(){var r,e,n,o;r=we,i=Bt,0===_e&&De(i),t.substr(we,5).toLowerCase()===T?(e=t.substr(we,5),we+=5):e=u;var i;e!==u?(n=we,Te(),o=rn(),Ne(!0),o===u?n=void 0:(we=n,n=u),n!==u?r=e=[e,n]:(we=r,r=u)):(we=r,r=u);return r}())!==u&&(r,e=Hr()),r=e);return r}())===u&&(r=function(){var r,e;r=we,(e=function(){var r,e,n,o,i;return r=we,i=Kt,0===_e&&De(i),t.substr(we,4).toLowerCase()===j?(e=t.substr(we,4),we+=4):e=u,e!==u?(n=we,Te(),o=rn(),Ne(!0),o===u?n=void 0:(we=n,n=u),n!==u?r=e=[e,n]:(we=r,r=u)):(we=r,r=u),r}())!==u&&(r,e=Br());return r=e}()),r}function on(){var r,e;return e=St,0===_e&&De(e),ut.test(t.charAt(we))?(r=t.charAt(we),we++):r=u,r===u&&(r=function(){var r,e,n,o,i,a,c=function(t){0===_e&&De(t)};r=we,c(Lt),t.substr(we,2)===A?(e=A,we+=2):e=u;e!==u&&(r,e=Yr());(r=e)===u&&(r=we,c(Rt),t.substr(we,2)===m?(e=m,we+=2):e=u,e!==u&&(r,e=Jr()),(r=e)===u&&(r=we,c(jt),t.substr(we,2)===C?(e=C,we+=2):e=u,e!==u&&(r,e=Qr()),(r=e)===u&&(r=we,c(Ft),t.substr(we,2)===x?(e=x,we+=2):e=u,e!==u&&(r,e=Vr()),(r=e)===u&&(r=we,c(Tt),t.substr(we,2)===w?(e=w,we+=2):e=u,e!==u&&(r,e=$r()),(r=e)===u&&(r=we,c(Dt),t.substr(we,2)===O?(e=O,we+=2):e=u,e!==u&&(r,e=te()),(r=e)===u&&(r=we,c(Nt),t.substr(we,2)===E?(e=E,we+=2):e=u,e!==u&&(r,e=re()),(r=e)===u&&(r=we,c(It),t.substr(we,2)===_?(e=_,we+=2):e=u,e!==u&&(r,e=ee()),(r=e)===u&&(r=we,c(Mt),t.substr(we,2)===S?(e=S,we+=2):e=u,e!==u&&(r,e=ne()),(r=e)===u&&(r=we,c(Pt),t.substr(we,2)===L?(e=L,we+=2):e=u,e!==u&&(n=vn())!==u&&(o=vn())!==u&&(i=vn())!==u&&(a=vn())!==u?(r,r=ue(n,o,i,a)):(we=r,r=u))))))))));return r}()),r}function an(){var t,r;return t=we,(r=function(){var t,r,e,n;t=we,(r=cn())!==u&&(e=fn())!==u&&(n=ln())!==u?(_n(),t,t=ie(r,e,n)):(we=t,t=u);t===u&&(t=we,(r=cn())!==u&&(e=fn())!==u?(n=_n(),t,t=ae(r,e)):(we=t,t=u),t===u&&(t=we,(r=cn())!==u&&(e=ln())!==u?(n=_n(),t,t=ce(r,e)):(we=t,t=u),t===u&&(t=we,(r=cn())!==u?(e=_n(),t,t=fe(r)):(we=t,t=u))));return t}())!==u&&(t,r=oe(r)),t=r}function cn(){var t;return(t=sn())===u&&(t=pn()),t}function fn(){var r,e,n,o;return r=we,o=qt,0===_e&&De(o),46===t.charCodeAt(we)?(e=R,we++):e=u,e!==u&&(n=sn())!==u?(r,r=le(n)):(we=r,r=u),r}function ln(){var r,e,n;return r=we,(e=function(){var r,e,n,o=function(t){0===_e&&De(t)};r=we,o(zt),at.test(t.charAt(we))?(e=t.charAt(we),we++):e=u;e!==u?(o(Zt),ct.test(t.charAt(we))?(n=t.charAt(we),we++):n=u,n===u&&(n=null),r,r=ve(e,n)):(we=r,r=u);return r}())!==u&&(n=sn())!==u?(r,r=se(e,n)):(we=r,r=u),r}function sn(){var t,r,e;if(t=we,r=[],(e=pn())!==u)for(;e!==u;)r.push(e),e=pn();else r=u;return r!==u&&(t,r=pe(r)),t=r}function pn(){var r,e;return e=kt,0===_e&&De(e),ot.test(t.charAt(we))?(r=t.charAt(we),we++):r=u,r}function vn(){var r,e;return e=Ut,0===_e&&De(e),it.test(t.charAt(we))?(r=t.charAt(we),we++):r=u,r}function hn(){var r,e,n,o,i;return r=we,i=Jt,0===_e&&De(i),t.substr(we,2).toLowerCase()===P?(e=t.substr(we,2),we+=2):e=u,e!==u?(n=we,Te(),o=rn(),Ne(!0),o===u?n=void 0:(we=n,n=u),n!==u?r=e=[e,n]:(we=r,r=u)):(we=r,r=u),r}function dn(){var r,e,n,o,i;return r=we,i=rr,0===_e&&De(i),t.substr(we,2).toLowerCase()===Z?(e=t.substr(we,2),we+=2):e=u,e!==u?(n=we,Te(),o=rn(),Ne(!0),o===u?n=void 0:(we=n,n=u),n!==u?(r,r=be()):(we=r,r=u)):(we=r,r=u),r}function bn(){var r,e,n,o,i;return r=we,i=er,0===_e&&De(i),t.substr(we,2).toLowerCase()===K?(e=t.substr(we,2),we+=2):e=u,e!==u?(n=we,Te(),o=rn(),Ne(!0),o===u?n=void 0:(we=n,n=u),n!==u?(r,r=ye()):(we=r,r=u)):(we=r,r=u),r}function yn(){var r,e,n,o,i;return r=we,i=nr,0===_e&&De(i),t.substr(we,4).toLowerCase()===X?(e=t.substr(we,4),we+=4):e=u,e!==u?(n=we,Te(),o=rn(),Ne(!0),o===u?n=void 0:(we=n,n=u),n!==u?(r,r=ge()):(we=r,r=u)):(we=r,r=u),r}function gn(){var r,e,n,o,i;return r=we,i=ur,0===_e&&De(i),t.substr(we,6).toLowerCase()===B?(e=t.substr(we,6),we+=6):e=u,e!==u?(n=we,Te(),o=rn(),Ne(!0),o===u?n=void 0:(we=n,n=u),n!==u?(r,r=Ae()):(we=r,r=u)):(we=r,r=u),r}function An(){var r,e,n,o,i;return r=we,i=or,0===_e&&De(i),t.substr(we,3).toLowerCase()===G?(e=t.substr(we,3),we+=3):e=u,e!==u?(n=we,Te(),o=rn(),Ne(!0),o===u?n=void 0:(we=n,n=u),n!==u?(r,r=me()):(we=r,r=u)):(we=r,r=u),r}function mn(){var r,e,n,o,i;return r=we,i=ir,0===_e&&De(i),t.substr(we,3).toLowerCase()===H?(e=t.substr(we,3),we+=3):e=u,e!==u?(n=we,Te(),o=rn(),Ne(!0),o===u?n=void 0:(we=n,n=u),n!==u?(r,r=Ce()):(we=r,r=u)):(we=r,r=u),r}function Cn(){var r,e,n,o,i;return r=we,i=ar,0===_e&&De(i),t.substr(we,2).toLowerCase()===W?(e=t.substr(we,2),we+=2):e=u,e!==u?(n=we,Te(),o=rn(),Ne(!0),o===u?n=void 0:(we=n,n=u),n!==u?(r,r=xe()):(we=r,r=u)):(we=r,r=u),r}function xn(){var r,e;return e=qt,0===_e&&De(e),46===t.charCodeAt(we)?(r=R,we++):r=u,r}function wn(){var r,e;return e=cr,0===_e&&De(e),44===t.charCodeAt(we)?(r=Y,we++):r=u,r}function On(){var r,e;return e=lr,0===_e&&De(e),40===t.charCodeAt(we)?(r=J,we++):r=u,r}function En(){var r,e;return e=sr,0===_e&&De(e),41===t.charCodeAt(we)?(r=Q,we++):r=u,r}function _n(){var t,r;for(t=[],r=Sn();r!==u;)t.push(r),r=Sn();return t}function Sn(){var r,e;return e=pr,0===_e&&De(e),ft.test(t.charAt(we))?(r=t.charAt(we),we++):r=u,r}var Ln={AND:!0,ASC:!0,BY:!0,CONTAINS:!0,DESC:!0,EXISTS:!0,FALSE:!0,FROM:!0,GROUP:!0,IN:!0,IS:!0,LIKE:!0,LIMIT:!0,NOT:!0,NULL:!0,OR:!0,ORDER:!0,SELECT:!0,TRUE:!0,WHERE:!0};function Rn(t,r){return{type:"unary_expr",operator:t,expr:r}}function jn(t,r,e){return{type:"binary_expr",operator:t,left:r,right:e}}function Fn(t,r){for(var e=[t],n=0;n<r.length;n++)e.push(r[n][3]);return e}function Tn(t,r){for(var e=t,n=0;n<r.length;n++)e=jn(r[n][1],e,r[n][3]);return e}if(Te(),(e=i())!==u&&we===t.length)return e;throw e!==u&&we<t.length&&De({type:"end"}),function(){var r=Ee[0],e=r.pos;return Ie(r.variants,e<t.length?t.charAt(e):null,e<t.length?Fe(e,e+1):Fe(e,e))}()}Object.defineProperty(r,"__esModule",{value:!0}),r.SyntaxError=n,r.parse=u,r.default=void 0,function(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}(n,Error),n.buildMessage=function(t,r){var e={literal:function(t){return'"'+u(t.text)+'"'},class:function(t){var r=t.parts.map(function(t){return Array.isArray(t)?o(t[0])+"-"+o(t[1]):o(t)});return"["+(t.inverted?"^":"")+r+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(t){return t.description},not:function(t){return"not "+i(t.expected)}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function u(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+n(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+n(t)})}function o(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+n(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+n(t)})}function i(t){return e[t.type](t)}return"Expected "+function(t){var r,e,n=t.map(i);if(n.sort(),n.length>0){for(r=1,e=1;r<n.length;r++)n[r-1]!==n[r]&&(n[e]=n[r],e++);n.length=e}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(t)+" but "+function(t){return t?'"'+u(t)+'"':"end of input"}(r)+" found."};var o={SyntaxError:n,parse:u};r.default=o},function(t,r,e){"use strict";function n(t,r){var e=r.entries().next().value[0];function u(t){var u=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!t)return;if(t.type==="binary_expr"){if(t.operator==="AND"||t.operator==="OR"){n(t.left,r,t.operator);n(t.right,r,t.operator)}else if(t.operator==="="){if(!t.left.table)t.left.table=e;if(!r.has(t.left.table))throw Error("Table ".concat(t.left.table," was not specified in FROM statement"));var o=t.left.table;var i=t.left.column;var a=t.right.column||t.right.value;t["selector"]={table:o,selector:"[".concat(i,'="').concat(a,'"]')};t.type="selector";delete t.left;delete t.right;delete t.operator}}t.parent=u}u(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.transpile=function(t){var r=function(t){var r=new Set;return t.forEach(function(t){if("table_ref"!==t.type)throw new Error("Expected ".concat(t," to be a table_ref"));r.add(t.table)}),r}(t.from);!function t(r,e){var n=e.entries().next().value[0];function u(r){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(r){if("binary_expr"===r.type)if("AND"===r.operator||"OR"===r.operator)t(r.left,e,r.operator),t(r.right,e,r.operator);else if("="===r.operator){if(r.left.table||(r.left.table=n),!e.has(r.left.table))throw Error("Table ".concat(r.left.table," was not specified in FROM statement"));var o=r.left.table,i=r.left.column,a=r.right.column||r.right.value;r.selector={table:o,selector:"[".concat(i,'="').concat(a,'"]')},r.type="selector",delete r.left,delete r.right,delete r.operator}r.parent=u}}!function u(r){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!r)return;if("binary_expr"===r.type)if("AND"===r.operator||"OR"===r.operator)!function t(r,e){var n=e.entries().next().value[0];function u(r){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(r){if("binary_expr"===r.type)if("AND"===r.operator||"OR"===r.operator)t(r.left,e,r.operator),t(r.right,e,r.operator);else if("="===r.operator){if(r.left.table||(r.left.table=n),!e.has(r.left.table))throw Error("Table ".concat(r.left.table," was not specified in FROM statement"));var o=r.left.table,i=r.left.column,a=r.right.column||r.right.value;r.selector={table:o,selector:"[".concat(i,'="').concat(a,'"]')},r.type="selector",delete r.left,delete r.right,delete r.operator}r.parent=u}}u(r)}(r.left,e,r.operator),t(r.right,e,r.operator);else if("="===r.operator){if(r.left.table||(r.left.table=n),!e.has(r.left.table))throw Error("Table ".concat(r.left.table," was not specified in FROM statement"));var o=r.left.table,i=r.left.column,a=r.right.column||r.right.value;r.selector={table:o,selector:"[".concat(i,'="').concat(a,'"]')},r.type="selector",delete r.left,delete r.right,delete r.operator}r.parent=u}(r)}(t.where,r);var e={};r.forEach(function(t){e[t]=[""]}),function(t,r){if(!t)return;var e=!1,n=!1;!function t(u){if("selector"===u.type){var o=r[u.selector.table];if(n)return o.push(o[o.length-1]),n=!1,void(o[o.length-2]+=u.selector.selector);e&&(""!==o[o.length-1]&&o.push(""),e=!1),o[o.length-1]+=u.selector.selector}if("binary_expr"===u.type){var i=u.left,a=u.right;"AND"===u.operator?(t(i),t(a)):"OR"===u.operator&&("AND"===u.parent&&(n=!0),t(i),"AND"!==u.parent&&(e=!0),t(a))}}(t)}(t.where,e);var n=[function(t){var r=[];for(var e in t){for(var n="",u=0;u<t[e].length;u++)n+=e+t[e][u],u<t[e].length-1&&(n+=", ");r.push(n)}return r.join(", ")}(e)];t.limit&&1===t.limit.value?n.push(document.querySelector.bind(document)):n.push(document.querySelectorAll.bind(document));return n}},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sort=function(t,r){return r.sort(t),r},r.execute=function(t){if(!t||0===t.length)return null;for(var r=t[0],e=1;e<t.length;e++)r=t[e](r);return r}}])});