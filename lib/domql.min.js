!function(r,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("domql",[],t):"object"==typeof exports?exports.domql=t():r.domql=t()}("undefined"!=typeof self?self:this,function(){return function(r){var t={};function n(e){if(t[e])return t[e].exports;var u=t[e]={i:e,l:!1,exports:{}};return r[e].call(u.exports,u,u.exports,n),u.l=!0,u.exports}return n.m=r,n.c=t,n.d=function(r,t,e){n.o(r,t)||Object.defineProperty(r,t,{enumerable:!0,get:e})},n.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},n.t=function(r,t){if(1&t&&(r=n(r)),8&t)return r;if(4&t&&"object"==typeof r&&r&&r.__esModule)return r;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:r}),2&t&&"string"!=typeof r)for(var u in r)n.d(e,u,function(t){return r[t]}.bind(null,u));return e},n.n=function(r){var t=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(t,"a",t),t},n.o=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},n.p="",n(n.s=0)}([function(r,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Domql=void 0;var e=n(1),u=n(3),o=function(r){if(r&&r.__esModule)return r;var t={};if(null!=r)for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){var e=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(r,n):{};e.get||e.set?Object.defineProperty(t,n,e):t[n]=r[n]}return t.default=r,t}(n(4));function i(r,t){for(var n=0;n<t.length;n++){var e=t[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(r,e.key,e)}}var c=function(){function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!function(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this._name="Domql",this.compile(t)}var t,n,c;return t=r,(n=[{key:"compile",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this._query=r,r){var t=(0,e.parse)(r);this._directives=(0,u.transpile)(t)}}},{key:"execute",value:function(){return o.execute(this._directives)}},{key:"name",get:function(){return this._name}},{key:"query",get:function(){return this._query}}])&&i(t.prototype,n),c&&i(t,c),r}();t.Domql=c},function(r,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parse=function(r){return(0,e.parse)(r)};var e=n(2)},function(r,t,n){"use strict";function e(r,t,n,u){this.message=r,this.expected=t,this.found=n,this.location=u,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}function u(r,t){t=void 0!==t?t:{};var n,u={},o={start:Mn},i=Mn,c="!",a="=",f=">=",s=">",l="<=",p="<>",v="<",h="!=",d='"',b="'",y="`",g="*",A="\\'",m='\\"',C="\\\\",x="\\/",w="\\b",E="\\f",S="\\n",_="\\r",O="\\t",L="\\u",j=".",R="null",F="true",T="false",I="select",D="from",N="where",P="group",M="by",q="order",k="limit",U="asc",z="desc",Z="in",K="is",X="like",B="exists",G="not",H="and",W="or",Y=",",J="(",Q=")",V=/^[^"]/,$=/^[^']/,rr=/^[^`]/,tr=/^[A-Za-z_]/,nr=/^[A-Za-z0-9_]/,er=/^[A-Za-z0-9_:]/,ur=/^[^'\\\0-\x1F\x7F]/,or=/^[0-9]/,ir=/^[0-9a-fA-F]/,cr=/^[eE]/,ar=/^[+\-]/,fr=/^[ \t\n\r]/,sr=Ln("!",!1),lr=Ln("=",!1),pr=Ln(">=",!1),vr=Ln(">",!1),hr=Ln("<=",!1),dr=Ln("<>",!1),br=Ln("<",!1),yr=Ln("!=",!1),gr=Ln('"',!1),Ar=jn(['"'],!0,!1),mr=Ln("'",!1),Cr=jn(["'"],!0,!1),xr=Ln("`",!1),wr=jn(["`"],!0,!1),Er=jn([["A","Z"],["a","z"],"_"],!1,!1),Sr=jn([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),_r=jn([["A","Z"],["a","z"],["0","9"],"_",":"],!1,!1),Or=jn(["'","\\",["\0",""],""],!0,!1),Lr=Ln("\\'",!1),jr=Ln('\\"',!1),Rr=Ln("\\\\",!1),Fr=Ln("\\/",!1),Tr=Ln("\\b",!1),Ir=Ln("\\f",!1),Dr=Ln("\\n",!1),Nr=Ln("\\r",!1),Pr=Ln("\\t",!1),Mr=Ln("\\u",!1),qr=Ln(".",!1),kr=jn([["0","9"]],!1,!1),Ur=jn([["0","9"],["a","f"],["A","F"]],!1,!1),zr=jn(["e","E"],!1,!1),Zr=jn(["+","-"],!1,!1),Kr=Ln("NULL",!0),Xr=Ln("TRUE",!0),Br=Ln("FALSE",!0),Gr=Ln("SELECT",!0),Hr=Ln("FROM",!0),Wr=Ln("WHERE",!0),Yr=Ln("GROUP",!0),Jr=Ln("BY",!0),Qr=Ln("ORDER",!0),Vr=Ln("LIMIT",!0),$r=Ln("ASC",!0),rt=Ln("DESC",!0),tt=Ln("IN",!0),nt=Ln("IS",!0),et=Ln("LIKE",!0),ut=Ln("EXISTS",!0),ot=Ln("NOT",!0),it=Ln("AND",!0),ct=Ln("OR",!0),at=Ln(",",!1),ft=Ln("*",!1),st=Ln("(",!1),lt=Ln(")",!1),pt=jn([" ","\t","\n","\r"],!1,!1),vt=function(r,t,n,e,u,o){return{type:"select",columns:r,from:t,where:n,groupby:e,orderby:u,limit:o}},ht=function(){return"*"},dt=function(r,t){return Fe(r,t)},bt=function(r){return r},yt=function(r){return r},gt=function(r,t){return t.unshift(r),t},At=function(r){return r},mt=function(r,t){var n={type:"table_ref",table:r};return null!==t&&(n.table=t[3]),n},Ct=function(r){return r},xt=function(r,t){var n=r;return n.order="ASC","DESC"===t&&(n.order="DESC"),n},wt=function(r){return r},Et=function(r,t){var n={type:"expr_list"};return n.value=Fe(r,t),n},St=function(r,t){return Te(r,t)},_t=function(r){return je("NOT",r)},Ot=function(r,t){return null===t?r:"arithmetic"===t.type?Te(r,t.tail):Re(t.op,r,t.right)},Lt=function(r,t){return t.parentheses=!0,je(r,t)},jt=function(r){return r[0]+" "+r[2]},Rt=function(r){return{type:"arithmetic",tail:r}},Ft=function(r){return{op:"IS",right:r}},Tt=function(r){return{op:"IS NOT",right:r}},It=function(r,t){return{op:r,right:t}},Dt=function(r,t){return{op:r,right:t}},Nt=function(r,t){return Te(r,t)},Pt=function(r){return r.parentheses=!0,r},Mt=function(r){return r.parentheses=!0,r},qt=function(r,t){return{type:"column_ref",table:r,column:t}},kt=function(r){return{type:"column_ref",column:r}},Ut=function(r){return!0===Le[r.toUpperCase()]},zt=function(r){return r},Zt=function(r){return r.join("")},Kt=function(r){return r},Xt=function(r,t){return r+t.join("")},Bt=function(){return{type:"null",value:null}},Gt=function(){return{type:"bool",value:!0}},Ht=function(){return{type:"bool",value:!1}},Wt=function(r){return{type:"string",value:r[1].join("")}},Yt=function(){return"'"},Jt=function(){return'"'},Qt=function(){return"\\"},Vt=function(){return"/"},$t=function(){return"\b"},rn=function(){return"\f"},tn=function(){return"\n"},nn=function(){return"\r"},en=function(){return"\t"},un=function(r,t,n,e){return String.fromCharCode(parseInt("0x"+r+t+n+e))},on=function(r){return{type:"number",value:r}},cn=function(r,t,n){return parseFloat(r+t+n)},an=function(r,t){return parseFloat(r+t)},fn=function(r,t){return parseFloat(r+t)},sn=function(r){return parseFloat(r)},ln=function(r){return"."+r},pn=function(r,t){return r+t},vn=function(r){return r.join("")},hn=function(r,t){return r+(null!==t?t:"")},dn=function(){return"ASC"},bn=function(){return"DESC"},yn=function(){return"IN"},gn=function(){return"IS"},An=function(){return"LIKE"},mn=function(){return"EXISTS"},Cn=function(){return"NOT"},xn=function(){return"AND"},wn=function(){return"OR"},En=0,Sn=[{line:1,column:1}],_n=[],On=0;if("startRule"in t){if(!(t.startRule in o))throw new Error("Can't start parsing from rule \""+t.startRule+'".');i=o[t.startRule]}function Ln(r,t){return{type:"literal",text:r,ignoreCase:t}}function jn(r,t,n){return{type:"class",parts:r,inverted:t,ignoreCase:n}}function Rn(t){var n,e=Sn[t];if(e)return e;for(n=t-1;!Sn[n];)n--;for(e={line:(e=Sn[n]).line,column:e.column};n<t;)10===r.charCodeAt(n)?(e.line++,e.column=1):e.column++,n++;return Sn[t]=e,e}var Fn="string"==typeof t.filename&&t.filename.length>0;function Tn(r,n){var e={};Fn&&(e.filename=t.filename);var u=Rn(r);e.start={offset:r,line:u.line,column:u.column};var o=Rn(n);return e.end={offset:n,line:o.line,column:o.column},e}function In(){_n.push({pos:En,variants:[]})}function Dn(r){var t=_n[_n.length-1];En<t.pos||(En>t.pos&&(t.pos=En,t.variants=[]),t.variants.push(r))}function Nn(r){var t=_n.pop(),n=_n[_n.length-1],e=t.variants;n.pos===t.pos&&(r&&(e=e.map(function(r){return"not"===r.type?r.expected:{type:"not",expected:r}})),Array.prototype.push.apply(n.variants,e))}function Pn(r,t,n){return new e(e.buildMessage(r,t),r,t,n)}function Mn(){return qn()}function qn(){var t,n,e,o,i,c,a;return t=En,_e(),function(){var t,n,e,o;t=En,i=Gr,0===On&&Dn(i),r.substr(En,6).toLowerCase()===I?(n=r.substr(En,6),En+=6):n=u;var i;n!==u?(e=En,In(),o=ne(),Nn(!0),o===u?e=void 0:(En=e,e=u),e!==u?t=n=[n,e]:(En=t,t=u)):(En=t,t=u);return t}()!==u?(_e(),(n=function(){var t,n,e,o,i,c,a,f;t=En,n=En,(e=function(){var t,n;return n=ft,0===On&&Dn(n),42===r.charCodeAt(En)?(t=g,En++):t=u,t}())!==u?(o=En,In(),i=ne(),Nn(!0),i===u?o=void 0:(En=o,o=u),o!==u?n=e=[e,o]:(En=n,n=u)):(En=n,n=u);n!==u&&(t,n=ht());if((t=n)===u)if(t=En,(n=kn())!==u){for(e=[],o=En,i=_e(),(c=we())!==u?(a=_e(),(f=kn())!==u?o=i=[i,c,a,f]:(En=o,o=u)):(En=o,o=u);o!==u;)e.push(o),o=En,i=_e(),(c=we())!==u?(a=_e(),(f=kn())!==u?o=i=[i,c,a,f]:(En=o,o=u)):(En=o,o=u);t,t=dt(n,e)}else En=t,t=u;return t}())!==u?(_e(),(e=function(){var t,n;t=En,function(){var t,n,e,o,i;return t=En,i=Hr,0===On&&Dn(i),r.substr(En,4).toLowerCase()===D?(n=r.substr(En,4),En+=4):n=u,n!==u?(e=En,In(),o=ne(),Nn(!0),o===u?e=void 0:(En=e,e=u),e!==u?t=n=[n,e]:(En=t,t=u)):(En=t,t=u),t}()!==u?(_e(),(n=function(){var r,t,n,e;if(r=En,(t=zn())!==u){for(n=[],e=Un();e!==u;)n.push(e),e=Un();r,r=gt(t,n)}else En=r,r=u;return r}())!==u?(t,t=yt(n)):(En=t,t=u)):(En=t,t=u);return t}())===u&&(e=null),_e(),(o=function(){var t,n;t=En,function(){var t,n,e,o,i;return t=En,i=Wr,0===On&&Dn(i),r.substr(En,5).toLowerCase()===N?(n=r.substr(En,5),En+=5):n=u,n!==u?(e=En,In(),o=ne(),Nn(!0),o===u?e=void 0:(En=e,e=u),e!==u?t=n=[n,e]:(En=t,t=u)):(En=t,t=u),t}()!==u?(_e(),(n=Xn())!==u?(t,t=Ct(n)):(En=t,t=u)):(En=t,t=u);return t}())===u&&(o=null),_e(),(i=function(){var t,n;t=En,function(){var t,n,e,o,i;return t=En,i=Yr,0===On&&Dn(i),r.substr(En,5).toLowerCase()===P?(n=r.substr(En,5),En+=5):n=u,n!==u?(e=En,In(),o=ne(),Nn(!0),o===u?e=void 0:(En=e,e=u),e!==u?t=n=[n,e]:(En=t,t=u)):(En=t,t=u),t}()!==u?(_e(),he()!==u?(_e(),(n=function(){var r,t,n,e,o,i,c,a;if(r=En,(t=Vn())!==u){for(n=[],e=En,o=_e(),(i=we())!==u?(c=_e(),(a=Vn())!==u?e=o=[o,i,c,a]:(En=e,e=u)):(En=e,e=u);e!==u;)n.push(e),e=En,o=_e(),(i=we())!==u?(c=_e(),(a=Vn())!==u?e=o=[o,i,c,a]:(En=e,e=u)):(En=e,e=u);r,r=dt(t,n)}else En=r,r=u;return r}())!==u?(t,t=yt(n)):(En=t,t=u)):(En=t,t=u)):(En=t,t=u);return t}())===u&&(i=null),_e(),(c=function(){var t,n;t=En,function(){var t,n,e,o,i;return t=En,i=Qr,0===On&&Dn(i),r.substr(En,5).toLowerCase()===q?(n=r.substr(En,5),En+=5):n=u,n!==u?(e=En,In(),o=ne(),Nn(!0),o===u?e=void 0:(En=e,e=u),e!==u?t=n=[n,e]:(En=t,t=u)):(En=t,t=u),t}()!==u?(_e(),he()!==u?(_e(),(n=function(){var r,t,n,e,o,i,c,a;if(r=En,(t=Zn())!==u){for(n=[],e=En,o=_e(),(i=we())!==u?(c=_e(),(a=Zn())!==u?e=o=[o,i,c,a]:(En=e,e=u)):(En=e,e=u);e!==u;)n.push(e),e=En,o=_e(),(i=we())!==u?(c=_e(),(a=Zn())!==u?e=o=[o,i,c,a]:(En=e,e=u)):(En=e,e=u);r,r=dt(t,n)}else En=r,r=u;return r}())!==u?(t,t=yt(n)):(En=t,t=u)):(En=t,t=u)):(En=t,t=u);return t}())===u&&(c=null),_e(),(a=function(){var t,n;t=En,function(){var t,n,e,o,i;return t=En,i=Vr,0===On&&Dn(i),r.substr(En,5).toLowerCase()===k?(n=r.substr(En,5),En+=5):n=u,n!==u?(e=En,In(),o=ne(),Nn(!0),o===u?e=void 0:(En=e,e=u),e!==u?t=n=[n,e]:(En=t,t=u)):(En=t,t=u),t}()!==u?(_e(),(n=ce())!==u?(t,t=wt(n)):(En=t,t=u)):(En=t,t=u);return t}())===u&&(a=null),t,t=vt(n,e,o,i,c,a)):(En=t,t=u)):(En=t,t=u),t}function kn(){var r,t;return r=En,(t=Vn())!==u&&(r,t=bt(t)),r=t}function Un(){var r,t;return r=En,_e(),we()!==u?(_e(),(t=zn())!==u?(r,r=At(t)):(En=r,r=u)):(En=r,r=u),r}function zn(){var r,t,n,e,o,i,c;return r=En,(t=$n())!==u?(n=En,e=_e(),(o=xe())!==u?(i=_e(),(c=$n())!==u?n=e=[e,o,i,c]:(En=n,n=u)):(En=n,n=u),n===u&&(n=null),r,r=mt(t,n)):(En=r,r=u),r}function Zn(){var t,n,e;return t=En,(n=Vn())!==u?(_e(),(e=function(){var t,n,e,o;t=En,i=rt,0===On&&Dn(i),r.substr(En,4).toLowerCase()===z?(n=r.substr(En,4),En+=4):n=u;var i;n!==u?(e=En,In(),o=ne(),Nn(!0),o===u?e=void 0:(En=e,e=u),e!==u?(t,t=bn()):(En=t,t=u)):(En=t,t=u);return t}())===u&&(e=function(){var t,n,e,o;t=En,i=$r,0===On&&Dn(i),r.substr(En,3).toLowerCase()===U?(n=r.substr(En,3),En+=3):n=u;var i;n!==u?(e=En,In(),o=ne(),Nn(!0),o===u?e=void 0:(En=e,e=u),e!==u?(t,t=dn()):(En=t,t=u)):(En=t,t=u);return t}()),e===u&&(e=null),t,t=xt(n,e)):(En=t,t=u),t}function Kn(){var r,t,n,e,o,i,c,a;if(r=En,(t=Xn())!==u){for(n=[],e=En,o=_e(),(i=we())!==u?(c=_e(),(a=Xn())!==u?e=o=[o,i,c,a]:(En=e,e=u)):(En=e,e=u);e!==u;)n.push(e),e=En,o=_e(),(i=we())!==u?(c=_e(),(a=Xn())!==u?e=o=[o,i,c,a]:(En=e,e=u)):(En=e,e=u);r,r=Et(t,n)}else En=r,r=u;return r}function Xn(){var r,t,n,e,o,i,c,a;if(r=En,(t=Bn())!==u){for(n=[],e=En,o=_e(),(i=Ce())!==u?(c=_e(),(a=Bn())!==u?e=o=[o,i,c,a]:(En=e,e=u)):(En=e,e=u);e!==u;)n.push(e),e=En,o=_e(),(i=Ce())!==u?(c=_e(),(a=Bn())!==u?e=o=[o,i,c,a]:(En=e,e=u)):(En=e,e=u);r,r=St(t,n)}else En=r,r=u;return r}function Bn(){var r,t,n,e,o,i,c,a;if(r=En,(t=Gn())!==u){for(n=[],e=En,o=_e(),(i=me())!==u?(c=_e(),(a=Gn())!==u?e=o=[o,i,c,a]:(En=e,e=u)):(En=e,e=u);e!==u;)n.push(e),e=En,o=_e(),(i=me())!==u?(c=_e(),(a=Gn())!==u?e=o=[o,i,c,a]:(En=e,e=u)):(En=e,e=u);r,r=St(t,n)}else En=r,r=u;return r}function Gn(){var t,n,e,o,i,f=function(r){0===On&&Dn(r)};return(t=Hn())===u&&(t=function(){var r,t,n;r=En,(t=function(){var r,t,n,e,o;return r=En,t=En,(n=Ae())!==u?(e=_e(),(o=ge())!==u?t=n=[n,e,o]:(En=t,t=u)):(En=t,t=u),t!==u&&(r,t=jt(t)),(r=t)===u&&(r=ge()),r}())!==u?(_e(),Ee()!==u?(_e(),(n=qn())!==u?(_e(),Se()!==u?(r,r=Lt(t,n)):(En=r,r=u)):(En=r,r=u)):(En=r,r=u)):(En=r,r=u);return r}())===u&&(t=En,(n=Ae())===u&&(n=En,f(sr),33===r.charCodeAt(En)?(e=c,En++):e=u,e!==u?(o=En,In(),f(lr),61===r.charCodeAt(En)?(i=a,En++):i=u,Nn(!0),i===u?o=void 0:(En=o,o=u),o!==u?n=e=[e,o]:(En=n,n=u)):(En=n,n=u)),n!==u?(e=_e(),(o=Gn())!==u?(t,t=_t(o)):(En=t,t=u)):(En=t,t=u)),t}function Hn(){var r,t,n;return r=En,(t=Yn())!==u?(_e(),(n=function(){var r;(r=function(){var r,t,n,e,o,i,c;if(r=En,t=[],n=En,e=_e(),(o=Wn())!==u?(i=_e(),(c=Yn())!==u?n=e=[e,o,i,c]:(En=n,n=u)):(En=n,n=u),n!==u)for(;n!==u;)t.push(n),n=En,e=_e(),(o=Wn())!==u?(i=_e(),(c=Yn())!==u?n=e=[e,o,i,c]:(En=n,n=u)):(En=n,n=u);else t=u;return t!==u&&(r,t=Rt(t)),r=t}())===u&&(r=function(){var r,t,n;r=En,(t=function(){var r,t,n,e,o;return r=En,t=En,(n=Ae())!==u?(e=_e(),(o=de())!==u?t=n=[n,e,o]:(En=t,t=u)):(En=t,t=u),t!==u&&(r,t=jt(t)),(r=t)===u&&(r=de()),r}())!==u?(_e(),Ee()!==u?(_e(),(n=Kn())!==u?(_e(),Se()!==u?(r,r=Dt(t,n)):(En=r,r=u)):(En=r,r=u)):(En=r,r=u)):(En=r,r=u);return r}())===u&&(r=function(){var r,t,n,e,o;r=En,(t=be())!==u?(n=_e(),(e=Yn())!==u?(r,r=Ft(e)):(En=r,r=u)):(En=r,r=u);r===u&&(r=En,t=En,(n=be())!==u?(e=_e(),(o=Ae())!==u?t=n=[n,e,o]:(En=t,t=u)):(En=t,t=u),t!==u?(n=_e(),(e=Yn())!==u?(r,r=Tt(e)):(En=r,r=u)):(En=r,r=u));return r}())===u&&(r=function(){var r,t,n;r=En,(t=function(){var r,t,n,e,o;return r=En,t=En,(n=Ae())!==u?(e=_e(),(o=ye())!==u?t=n=[n,e,o]:(En=t,t=u)):(En=t,t=u),t!==u&&(r,t=jt(t)),(r=t)===u&&(r=ye()),r}())!==u?(_e(),(n=Hn())!==u?(r,r=It(t,n)):(En=r,r=u)):(En=r,r=u);return r}());return r}())===u&&(n=null),r,r=Ot(t,n)):(En=r,r=u),r}function Wn(){var t,n=function(r){0===On&&Dn(r)};return n(pr),r.substr(En,2)===f?(t=f,En+=2):t=u,t===u&&(n(vr),62===r.charCodeAt(En)?(t=s,En++):t=u,t===u&&(n(hr),r.substr(En,2)===l?(t=l,En+=2):t=u,t===u&&(n(dr),r.substr(En,2)===p?(t=p,En+=2):t=u,t===u&&(n(br),60===r.charCodeAt(En)?(t=v,En++):t=u,t===u&&(n(lr),61===r.charCodeAt(En)?(t=a,En++):t=u,t===u&&(n(yr),r.substr(En,2)===h?(t=h,En+=2):t=u)))))),t}function Yn(){var r,t,n,e,o,i;if(r=En,(t=Jn())!==u){for(n=[],e=En,o=_e(),(i=Jn())!==u?e=o=[o,i]:(En=e,e=u);e!==u;)n.push(e),e=En,o=_e(),(i=Jn())!==u?e=o=[o,i]:(En=e,e=u);r,r=St(t,n)}else En=r,r=u;return r}function Jn(){var r,t,n,e,o,i;if(r=En,(t=Qn())!==u){for(n=[],e=En,o=_e(),(i=Qn())!==u?e=o=[o,i]:(En=e,e=u);e!==u;)n.push(e),e=En,o=_e(),(i=Qn())!==u?e=o=[o,i]:(En=e,e=u);r,r=Nt(t,n)}else En=r,r=u;return r}function Qn(){var r,t;return(r=oe())===u&&(r=Vn())===u&&(r=En,Ee()!==u?(_e(),(t=Xn())!==u?(_e(),Se()!==u?(r,r=Pt(t)):(En=r,r=u)):(En=r,r=u)):(En=r,r=u),r===u&&(r=En,Ee()!==u?(_e(),(t=Kn())!==u?(_e(),Se()!==u?(r,r=Mt(t)):(En=r,r=u)):(En=r,r=u)):(En=r,r=u))),r}function Vn(){var r,t,n;return r=En,(t=$n())!==u?(_e(),xe()!==u?(_e(),(n=te())!==u?(r,r=qt(t,n)):(En=r,r=u)):(En=r,r=u)):(En=r,r=u),r===u&&(r=En,(t=te())!==u&&(r,t=kt(t)),r=t),r}function $n(){var r,t;return r=En,(t=function(){var r,t,n,e;if(r=En,(t=ne())!==u){for(n=[],e=ee();e!==u;)n.push(e),e=ee();r,r=Xt(t,n)}else En=r,r=u;return r}())!==u?(En,(Ut(t)?u:void 0)!==u?(r,r=zt(t)):(En=r,r=u)):(En=r,r=u),r===u&&(r=En,(t=re())!==u&&(r,t=zt(t)),r=t),r}function re(){var t;return(t=function(){var t,n,e,o,i=function(r){0===On&&Dn(r)};t=En,i(gr),34===r.charCodeAt(En)?(n=d,En++):n=u;if(n!==u){if(e=[],i(Ar),V.test(r.charAt(En))?(o=r.charAt(En),En++):o=u,o!==u)for(;o!==u;)e.push(o),i(Ar),V.test(r.charAt(En))?(o=r.charAt(En),En++):o=u;else e=u;e!==u?(i(gr),34===r.charCodeAt(En)?(o=d,En++):o=u,o!==u?(t,t=Zt(e)):(En=t,t=u)):(En=t,t=u)}else En=t,t=u;return t}())===u&&(t=function(){var t,n,e,o,i=function(r){0===On&&Dn(r)};t=En,i(mr),39===r.charCodeAt(En)?(n=b,En++):n=u;if(n!==u){if(e=[],i(Cr),$.test(r.charAt(En))?(o=r.charAt(En),En++):o=u,o!==u)for(;o!==u;)e.push(o),i(Cr),$.test(r.charAt(En))?(o=r.charAt(En),En++):o=u;else e=u;e!==u?(i(mr),39===r.charCodeAt(En)?(o=b,En++):o=u,o!==u?(t,t=Zt(e)):(En=t,t=u)):(En=t,t=u)}else En=t,t=u;return t}())===u&&(t=function(){var t,n,e,o,i=function(r){0===On&&Dn(r)};t=En,i(xr),96===r.charCodeAt(En)?(n=y,En++):n=u;if(n!==u){if(e=[],i(wr),rr.test(r.charAt(En))?(o=r.charAt(En),En++):o=u,o!==u)for(;o!==u;)e.push(o),i(wr),rr.test(r.charAt(En))?(o=r.charAt(En),En++):o=u;else e=u;e!==u?(i(xr),96===r.charCodeAt(En)?(o=y,En++):o=u,o!==u?(t,t=Zt(e)):(En=t,t=u)):(En=t,t=u)}else En=t,t=u;return t}()),t}function te(){var r,t;return r=En,(t=function(){var r,t,n,e;if(r=En,(t=ne())!==u){for(n=[],e=ue();e!==u;)n.push(e),e=ue();r,r=Xt(t,n)}else En=r,r=u;return r}())!==u?(En,(Ut(t)?u:void 0)!==u?(r,r=Kt(t)):(En=r,r=u)):(En=r,r=u),r===u&&(r=re()),r}function ne(){var t,n;return n=Er,0===On&&Dn(n),tr.test(r.charAt(En))?(t=r.charAt(En),En++):t=u,t}function ee(){var t,n;return n=Sr,0===On&&Dn(n),nr.test(r.charAt(En))?(t=r.charAt(En),En++):t=u,t}function ue(){var t,n;return n=_r,0===On&&Dn(n),er.test(r.charAt(En))?(t=r.charAt(En),En++):t=u,t}function oe(){var t;return(t=function(){var t,n,e,o,i,c=function(r){0===On&&Dn(r)};t=En,n=En,c(mr),39===r.charCodeAt(En)?(e=b,En++):e=u;if(e!==u){for(o=[],i=ie();i!==u;)o.push(i),i=ie();c(mr),39===r.charCodeAt(En)?(i=b,En++):i=u,i!==u?n=e=[e,o,i]:(En=n,n=u)}else En=n,n=u;n!==u&&(t,n=Wt(n));return t=n}())===u&&(t=ce())===u&&(t=function(){var t,n;t=En,(n=function(){var t,n,e,o,i;return t=En,i=Xr,0===On&&Dn(i),r.substr(En,4).toLowerCase()===F?(n=r.substr(En,4),En+=4):n=u,n!==u?(e=En,In(),o=ne(),Nn(!0),o===u?e=void 0:(En=e,e=u),e!==u?t=n=[n,e]:(En=t,t=u)):(En=t,t=u),t}())!==u&&(t,n=Gt());(t=n)===u&&(t=En,(n=function(){var t,n,e,o;t=En,i=Br,0===On&&Dn(i),r.substr(En,5).toLowerCase()===T?(n=r.substr(En,5),En+=5):n=u;var i;n!==u?(e=En,In(),o=ne(),Nn(!0),o===u?e=void 0:(En=e,e=u),e!==u?t=n=[n,e]:(En=t,t=u)):(En=t,t=u);return t}())!==u&&(t,n=Ht()),t=n);return t}())===u&&(t=function(){var t,n;t=En,(n=function(){var t,n,e,o,i;return t=En,i=Kr,0===On&&Dn(i),r.substr(En,4).toLowerCase()===R?(n=r.substr(En,4),En+=4):n=u,n!==u?(e=En,In(),o=ne(),Nn(!0),o===u?e=void 0:(En=e,e=u),e!==u?t=n=[n,e]:(En=t,t=u)):(En=t,t=u),t}())!==u&&(t,n=Bt());return t=n}()),t}function ie(){var t,n;return n=Or,0===On&&Dn(n),ur.test(r.charAt(En))?(t=r.charAt(En),En++):t=u,t===u&&(t=function(){var t,n,e,o,i,c,a=function(r){0===On&&Dn(r)};t=En,a(Lr),r.substr(En,2)===A?(n=A,En+=2):n=u;n!==u&&(t,n=Yt());(t=n)===u&&(t=En,a(jr),r.substr(En,2)===m?(n=m,En+=2):n=u,n!==u&&(t,n=Jt()),(t=n)===u&&(t=En,a(Rr),r.substr(En,2)===C?(n=C,En+=2):n=u,n!==u&&(t,n=Qt()),(t=n)===u&&(t=En,a(Fr),r.substr(En,2)===x?(n=x,En+=2):n=u,n!==u&&(t,n=Vt()),(t=n)===u&&(t=En,a(Tr),r.substr(En,2)===w?(n=w,En+=2):n=u,n!==u&&(t,n=$t()),(t=n)===u&&(t=En,a(Ir),r.substr(En,2)===E?(n=E,En+=2):n=u,n!==u&&(t,n=rn()),(t=n)===u&&(t=En,a(Dr),r.substr(En,2)===S?(n=S,En+=2):n=u,n!==u&&(t,n=tn()),(t=n)===u&&(t=En,a(Nr),r.substr(En,2)===_?(n=_,En+=2):n=u,n!==u&&(t,n=nn()),(t=n)===u&&(t=En,a(Pr),r.substr(En,2)===O?(n=O,En+=2):n=u,n!==u&&(t,n=en()),(t=n)===u&&(t=En,a(Mr),r.substr(En,2)===L?(n=L,En+=2):n=u,n!==u&&(e=ve())!==u&&(o=ve())!==u&&(i=ve())!==u&&(c=ve())!==u?(t,t=un(e,o,i,c)):(En=t,t=u))))))))));return t}()),t}function ce(){var r,t;return r=En,(t=function(){var r,t,n,e;r=En,(t=ae())!==u&&(n=fe())!==u&&(e=se())!==u?(_e(),r,r=cn(t,n,e)):(En=r,r=u);r===u&&(r=En,(t=ae())!==u&&(n=fe())!==u?(e=_e(),r,r=an(t,n)):(En=r,r=u),r===u&&(r=En,(t=ae())!==u&&(n=se())!==u?(e=_e(),r,r=fn(t,n)):(En=r,r=u),r===u&&(r=En,(t=ae())!==u?(n=_e(),r,r=sn(t)):(En=r,r=u))));return r}())!==u&&(r,t=on(t)),r=t}function ae(){var r;return(r=le())===u&&(r=pe()),r}function fe(){var t,n,e,o;return t=En,o=qr,0===On&&Dn(o),46===r.charCodeAt(En)?(n=j,En++):n=u,n!==u&&(e=le())!==u?(t,t=ln(e)):(En=t,t=u),t}function se(){var t,n,e;return t=En,(n=function(){var t,n,e,o=function(r){0===On&&Dn(r)};t=En,o(zr),cr.test(r.charAt(En))?(n=r.charAt(En),En++):n=u;n!==u?(o(Zr),ar.test(r.charAt(En))?(e=r.charAt(En),En++):e=u,e===u&&(e=null),t,t=hn(n,e)):(En=t,t=u);return t}())!==u&&(e=le())!==u?(t,t=pn(n,e)):(En=t,t=u),t}function le(){var r,t,n;if(r=En,t=[],(n=pe())!==u)for(;n!==u;)t.push(n),n=pe();else t=u;return t!==u&&(r,t=vn(t)),r=t}function pe(){var t,n;return n=kr,0===On&&Dn(n),or.test(r.charAt(En))?(t=r.charAt(En),En++):t=u,t}function ve(){var t,n;return n=Ur,0===On&&Dn(n),ir.test(r.charAt(En))?(t=r.charAt(En),En++):t=u,t}function he(){var t,n,e,o,i;return t=En,i=Jr,0===On&&Dn(i),r.substr(En,2).toLowerCase()===M?(n=r.substr(En,2),En+=2):n=u,n!==u?(e=En,In(),o=ne(),Nn(!0),o===u?e=void 0:(En=e,e=u),e!==u?t=n=[n,e]:(En=t,t=u)):(En=t,t=u),t}function de(){var t,n,e,o,i;return t=En,i=tt,0===On&&Dn(i),r.substr(En,2).toLowerCase()===Z?(n=r.substr(En,2),En+=2):n=u,n!==u?(e=En,In(),o=ne(),Nn(!0),o===u?e=void 0:(En=e,e=u),e!==u?(t,t=yn()):(En=t,t=u)):(En=t,t=u),t}function be(){var t,n,e,o,i;return t=En,i=nt,0===On&&Dn(i),r.substr(En,2).toLowerCase()===K?(n=r.substr(En,2),En+=2):n=u,n!==u?(e=En,In(),o=ne(),Nn(!0),o===u?e=void 0:(En=e,e=u),e!==u?(t,t=gn()):(En=t,t=u)):(En=t,t=u),t}function ye(){var t,n,e,o,i;return t=En,i=et,0===On&&Dn(i),r.substr(En,4).toLowerCase()===X?(n=r.substr(En,4),En+=4):n=u,n!==u?(e=En,In(),o=ne(),Nn(!0),o===u?e=void 0:(En=e,e=u),e!==u?(t,t=An()):(En=t,t=u)):(En=t,t=u),t}function ge(){var t,n,e,o,i;return t=En,i=ut,0===On&&Dn(i),r.substr(En,6).toLowerCase()===B?(n=r.substr(En,6),En+=6):n=u,n!==u?(e=En,In(),o=ne(),Nn(!0),o===u?e=void 0:(En=e,e=u),e!==u?(t,t=mn()):(En=t,t=u)):(En=t,t=u),t}function Ae(){var t,n,e,o,i;return t=En,i=ot,0===On&&Dn(i),r.substr(En,3).toLowerCase()===G?(n=r.substr(En,3),En+=3):n=u,n!==u?(e=En,In(),o=ne(),Nn(!0),o===u?e=void 0:(En=e,e=u),e!==u?(t,t=Cn()):(En=t,t=u)):(En=t,t=u),t}function me(){var t,n,e,o,i;return t=En,i=it,0===On&&Dn(i),r.substr(En,3).toLowerCase()===H?(n=r.substr(En,3),En+=3):n=u,n!==u?(e=En,In(),o=ne(),Nn(!0),o===u?e=void 0:(En=e,e=u),e!==u?(t,t=xn()):(En=t,t=u)):(En=t,t=u),t}function Ce(){var t,n,e,o,i;return t=En,i=ct,0===On&&Dn(i),r.substr(En,2).toLowerCase()===W?(n=r.substr(En,2),En+=2):n=u,n!==u?(e=En,In(),o=ne(),Nn(!0),o===u?e=void 0:(En=e,e=u),e!==u?(t,t=wn()):(En=t,t=u)):(En=t,t=u),t}function xe(){var t,n;return n=qr,0===On&&Dn(n),46===r.charCodeAt(En)?(t=j,En++):t=u,t}function we(){var t,n;return n=at,0===On&&Dn(n),44===r.charCodeAt(En)?(t=Y,En++):t=u,t}function Ee(){var t,n;return n=st,0===On&&Dn(n),40===r.charCodeAt(En)?(t=J,En++):t=u,t}function Se(){var t,n;return n=lt,0===On&&Dn(n),41===r.charCodeAt(En)?(t=Q,En++):t=u,t}function _e(){var r,t;for(r=[],t=Oe();t!==u;)r.push(t),t=Oe();return r}function Oe(){var t,n;return n=pt,0===On&&Dn(n),fr.test(r.charAt(En))?(t=r.charAt(En),En++):t=u,t}var Le={AND:!0,ASC:!0,BY:!0,CONTAINS:!0,DESC:!0,EXISTS:!0,FALSE:!0,FROM:!0,GROUP:!0,IN:!0,IS:!0,LIKE:!0,LIMIT:!0,NOT:!0,NULL:!0,OR:!0,ORDER:!0,SELECT:!0,TRUE:!0,WHERE:!0};function je(r,t){return{type:"unary_expr",operator:r,expr:t}}function Re(r,t,n){return{type:"binary_expr",operator:r,left:t,right:n}}function Fe(r,t){for(var n=[r],e=0;e<t.length;e++)n.push(t[e][3]);return n}function Te(r,t){for(var n=r,e=0;e<t.length;e++)n=Re(t[e][1],n,t[e][3]);return n}if(In(),(n=i())!==u&&En===r.length)return n;throw n!==u&&En<r.length&&Dn({type:"end"}),function(){var t=_n[0],n=t.pos;return Pn(t.variants,n<r.length?r.charAt(n):null,n<r.length?Tn(n,n+1):Tn(n,n))}()}Object.defineProperty(t,"__esModule",{value:!0}),t.SyntaxError=e,t.parse=u,t.default=void 0,function(r,t){function n(){this.constructor=r}n.prototype=t.prototype,r.prototype=new n}(e,Error),e.buildMessage=function(r,t){var n={literal:function(r){return'"'+u(r.text)+'"'},class:function(r){var t=r.parts.map(function(r){return Array.isArray(r)?o(r[0])+"-"+o(r[1]):o(r)});return"["+(r.inverted?"^":"")+t+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(r){return r.description},not:function(r){return"not "+i(r.expected)}};function e(r){return r.charCodeAt(0).toString(16).toUpperCase()}function u(r){return r.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(r){return"\\x0"+e(r)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(r){return"\\x"+e(r)})}function o(r){return r.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(r){return"\\x0"+e(r)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(r){return"\\x"+e(r)})}function i(r){return n[r.type](r)}return"Expected "+function(r){var t,n,e=r.map(i);if(e.sort(),e.length>0){for(t=1,n=1;t<e.length;t++)e[t-1]!==e[t]&&(e[n]=e[t],n++);e.length=n}switch(e.length){case 1:return e[0];case 2:return e[0]+" or "+e[1];default:return e.slice(0,-1).join(", ")+", or "+e[e.length-1]}}(r)+" but "+function(r){return r?'"'+u(r)+'"':"end of input"}(t)+" found."};var o={SyntaxError:e,parse:u};t.default=o},function(r,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transpile=function(r){var t=function(r){var t=new Set;return r.forEach(function(r){if("table_ref"!==r.type)throw new Error("Expected ".concat(r," to be a table_ref"));t.add(r.table)}),t}(r.from);!function r(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return;if("binary_expr"===t.type)if("AND"===t.operator||"OR"===t.operator)r(t.left,n,t.operator),r(t.right,n,t.operator);else if("="===t.operator){if(null===t.left.table&&(t.left.table="*"),!n.has(t.left.table))throw Error("Table ".concat(t.left.table," was not specified in FROM statement"));var u=t.left.table,o=t.left.column,i=t.right.column||t.right.value;t.selector={table:u,selector:"[".concat(o,'="').concat(i,'"]')},t.type="selector",delete t.left,delete t.right,delete t.operator}t.parent=e}(r.where,t);var n={};t.forEach(function(r){n[r]=[""]}),function(r,t){if(!r)return;var n=!1,e=!1;!function r(u){if("selector"===u.type){var o=t[u.selector.table];if(e)return o.push(o[o.length-1]),e=!1,void(o[o.length-2]+=u.selector.selector);n&&(o.push(""),n=!1),o[o.length-1]+=u.selector.selector}if("binary_expr"===u.type){var i=u.left,c=u.right;"AND"===u.operator?(r(i),r(c)):"OR"===u.operator&&("AND"===u.parent&&(e=!0),r(i),"AND"!==u.parent&&(n=!0),r(c))}}(r)}(r.where,n);var e=[function(r){var t=[];for(var n in r){for(var e="",u=0;u<r[n].length;u++)e+=n+r[n][u],u<r[n].length-1&&(e+=", ");t.push(e)}return t.join(", ")}(n)];r.limit&&1===r.limit.value?e.push(document.querySelector.bind(document)):e.push(document.querySelectorAll.bind(document));return e}},function(r,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sort=function(r,t){return t.sort(r),t},t.execute=function(r){if(!r||0===r.length)return null;for(var t=r[0],n=1;n<r.length;n++)t=r[n](t);return t}}])});